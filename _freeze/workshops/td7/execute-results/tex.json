{
  "hash": "f1628cda1d79f489cd1c65fb5a05c3a1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"TD 7 : Modélisation\"\nsubtitle: \"Modèle Conceptuel des Données\"\ncategories: [Modélisation EA, Modèle Conceptuel des Données]\ndate: \"2025-11-14\"\n\n\nformat:\n  pdf:\n    output-file: td7.pdf\n    include-in-header:\n      - text: \"\\\\lhead{{\\\\sf  Base de données \\\\\\\\ TD 7: Modèle Conceptuel des Données}}\"\n  html:\n    output-file: td7.html\n\nengine: knitr\n---\n\n\n::: {.content-visible when-profile='solution'} \n\n::: {.callout-warning}\n\n### Avec solutions\n\n:::\n\n:::\n\n\n\n::: {layout=\"[80,20]\"}\n\n::: {#first-column}\n\n|                            |\n|:---------------------------|\n| {{< var curriculum >}}     |\n| {{< var university >}}     |\n| [Année {{< var year >}}]() |\n| {{< var homepage >}}       |\n| {{< var moodle >}}         |\n\n\n::: \n\n::: {#second-column}\n![](../images/UniversiteParis_monogramme_couleur_RVB.png){align=\"right\" style=\"size:50px;\" width=75}\n:::\n\n:::\n\n\n\n::: {.callout-important title=\"Objectifs\"}\n\nL'objectif de cette séance est d'élaborer des MCD sur des études de cas. \n\n\n:::\n\n\n# Modèles Conceptuels des Données  avec la modélisation E/A\n\n## Exercice 1\n\nVous êtes engagé au journal SportKan'AP, où vous devez établir le système d'information des tournois de tennis du Grand Chelem. Le système doit mémoriser toutes les rencontres qui se sont déroulées depuis que ces tournois existent, ainsi que leur caractéristiques.\n\n#### Types de résultats attendus\n\n- Restituer la composition et le score des matches d'un tournoi, une année donnée.\n- Restituer la liste des arbitres ayant participé à un tournoi.\n- Connaître le pays qui a le plus souvent remporté le simple aux Internationaux de France.\n- Restituer les gains d'un joueur dans les tournois du Grand Chelem.\n- Établir la liste des différents entraîneurs d'un joueur...\n\n#### Précisions sur le système d'information \n\n- Il y a chaque année quatre tournois du Grand Chelem. Ils se déroulent dans les pays suivants : États-Unis, France, Grande-Bretagne, Australie. Pour un pays, ils peuvent se dérouler dans des endroits différents, ainsi aux États-Unis ils se sont déroulés à Forest Hill, puis à Flushing Meadow.\n- A chaque match est associé un gain, c'est celui du perdant. Par exemple au premier tour des tournois simples, à Roland-Garros en 2025, le joueur qui perd gagne 78 000 €, au deuxième tour, 117 000 €, etc. Les vainqueurs des tournois simples féminin ou masculin ont gagné le prix associé au tournoi, c'est-à-dire 2,55 millions d'euros.\n- Lors de ces tournois il y a neuf épreuves : simples et doubles féminins et masculins, double mixte, tennis-fauteuil simples et doubles, Quad simples et doubles.\n- Un joueur peut changer de nationalité, et même être apatride. Navratilova, d'origine tchèque, fut tour à tour apatride puis américaine.\n\n#### Phrases du système d'information\n\n- Iga Świątek a battu Nadia Podoroska à Roland-Garros en 2020 en 1/2 finale du simple féminin par 6‑2/6‑1.\n- Monsieur Wilkinson arbitra ce match (NB : cette information a été inventée pour l'exercice).\n- Le simple féminin de Roland-Garros a été remporté trois fois par une joueuse polonaise. \n- Björn Borg a gagné 2 millions $ au cours de ses participations aux tournois du Grand-Chelem (avec 11 titres).\n- Le vainqueur masculin de Roland-Garros en 2025 a gagné 2,55 millions €. \n- Yannick Noah a joué 4 fois en double mixte avec Hana Mandlíková.\n\n\n::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\n#### Dictionnaire des données\n**Version 1**\n\n| Nom | Signification |\n|:-|:---|\n| nom tournoi\t| Nom d'un tournoi |\n| pays\t\t| Pays d'un tournoi |\n| lieu\t\t| Lieu d'un tournoi |\n| année\t\t| Année d'un tournoi |\n| prix\t\t| Prix d'un tournoi |\n| nom  joueur \t| \tNom d'un joueur |\n| sexe\t\t| Sexe d'un joueur\n| nationalité   \t| \tNationalité d'un joueur\n| score \t| \tScore d'un match\n| date \t| \tDate d'un match\n| gain perdant \t| \tGain du perdant d'un match\n| type \t| \tType d'un match (simple messieurs, simple dames, double dames,...)\n| tour \t| \tTour d'un match (finale, demi finale,...)\n| nom arbitre \t| \tNom de l'arbitre d'un match\n| nom entraîneur \t| \tNom de l'entraîneur d'un joueur\n\n\n#### Recherche des entités, de leurs identifiants et propriétés\n\nOn a les entités évidentes suivantes :\n\n- **Entité TOURNOI**, propriétés évidentes : numéro tournoi, nom tournoi, année. Ces deux propriétés sont bien en dépendance fonctionnelle directe et complète de l'identifiant.\n  + numéro tournoi $\\rightarrow$ prix ?<br>\t\n    Cette dépendance fonctionnelle n'est pas vérifiée car le prix d'un tournoi varie en fonction du type (simple, double, etc.). On a donc la dépendance : numéro tournoi + type $\\rightarrow$ prix\t\n    Comme nous le verrons par la suite, cela impose de créer une entité TYPE. prix sera la propriété d'une association entre TOURNOI et TYPE. \n  + numéro tournoi $\\rightarrow$ lieu ?\t<br>\n    Il est dit qu'un tournoi peut se dérouler dans des lieux différents, néanmoins l'énoncé sous-entend que pour une année donnée, le lieu est unique. Or l'entité tournoi correspond à une année donnée. On a donc bien : numéro tournoi $\\rightarrow$ lieu. A priori, il est possible de faire de lieu une propriété de TOURNOI.\n  + numéro tournoi $\\rightarrow$ pays ?\t<br>\n    Cette dépendance est évidente. Mais on a aussi lieu $\\rightarrow$ pays, donc pays n'est pas en dépendance directe de numéro tournoi, ce n'est donc pas une propriété de TOURNOI. On doit donc créer une entité PAYS avec comme identifiant nom pays. Cet identifiant est pratique mais il posera problème si un des pays change de nom.\n  + La dépendance fonctionnelle lieu $\\rightarrow$ pays conduit à créer une entité LIEU. Pour cette raison, lieu n'est pas une propriété de TOURNOI.\n  \n- **Entité JOUEUR**, propriétés évidentes : numéro joueur, nom joueur, sexe.  Ces deux propriétés sont bien en dépendance fonctionnelle directe et complète de l'identifiant. \n  + numéro joueur $\\rightarrow$ nationalité ?<br>\t\n    La nationalité peut varier dans le temps et on veut conserver les nationalités successives d'un joueur pour calculer le nombre de victoire par pays. Il faut donc enregistrer l'historique des nationalités de chaque joueur. Il n'y a donc pas de dépendance fonctionnelle entre numéro joueur et nationalité, ce n'est pas une propriété de l'entité JOUEUR. En rangeant nationalité comme propriété de joueur on attribuerait toutes les victoires de Navratilova aux États-unis, alors que cette joueuse a été successivement tchèque, apatride, puis américaine. \n  + numéro joueur $\\rightarrow$ nom entraîneur ?<br>Cette dépendance fonctionnelle n'est pas vérifiée car un joueur peut changer d'arbitre et le SI doit conserver cet historique. Il faut donc créer une entité ENTRAÎNEUR.\n\n- Concernant les **matchs**, il peut être tentant d'en faire une association  réflexive sur JOUEUR, les propriétés de cette association étant score, type, gain perdant, tour et arbitre. On obtiendrait le modèle suivant :\n\n  ![](/images/td/tournois/tournois_match0.png){fig-align=\"center\" width=\"50%\"}\n\n  Mais une rencontre ainsi modélisée ne met en présence que deux joueurs : elle ne peut représenter que les simples ! Il faudrait donc créer une deuxième association à cinq arêtes pour les doubles. Le modèle n'est donc pas satisfaisant. De plus, on a déjà vu qu'il fallait faire de type une entité, ce n'est donc pas une propriété de l'association rencontrer car alors la même propriété serait présente deux fois dans le modèle. Cela obligerait donc à ajouter une arête vers l'entité TYPE à ces associations. On obtiendrait donc des associations à 4 et 6 arêtes (simples et doubles).<br>\n  On choisit donc, comme classiquement lorsqu'apparaît une association quaternaire et plus, de créer une entité MATCH, avec comme identifiant numéro match et comme propriétés évidentes score, date.\n    + numéro match $\\rightarrow$ gain perdant ?<br>\n    Cette dépendance fonctionnelle est vérifiée, mais elle n'est pas directe. En effet, tous les matchs d'un même type et d'un même tour offrent le même gain. On a numéro match $\\rightarrow$ numéro tournoi+type+tour $\\rightarrow$ gain perdant. Comme nous le verrons à propos des associations, cela oblige à créer une entité supplémentaire TOUR.\n    + numéro match $\\rightarrow$ nom arbitre ?\t\n    Cette dépendance fonctionnelle est vérifiée, elle est directe et complète, on peut donc faire de nom arbitre une propriété de MATCH, mais cette solution ne permet pas d'enregistrer dans la base une liste d'arbitre et des propriétés éventuelles qui leur seraient propres. Il est donc préférable de créer une entité ARBITRE.\n\n#### Version 2 du dictionnaire des données \n| Nom | Signification |\n|:-|:---|\n| numéro tournoi | Identifiant de TOURNOI |\n| nom tournoi\t| Nom d'un tournoi |\n| nom pays\t\t| Nom du pays d'un tournoi |\n| nom lieu\t\t| Nom du lieu d'un tournoi |\n| année\t\t| Année d'un tournoi |\n| prix\t\t| Prix d'un tournoi |\n| numéro  joueur \t| \tIdentifiant de JOUEUR |\n| nom  joueur \t| \tNom d'un joueur |\n| sexe\t\t| Sexe d'un joueur\n| numéro entraîneur \t| \tIdentifiant de ENTRAINEUR\n| nom entraîneur \t| \tNom de l'entraîneur d'un joueur\n| numéro match \t| \tIdentifiant de MATCH\n| date \t| \tDate d'un match\n| tour \t| \tTour d'un match (finale, demi finale,...)\n| type \t| \tType d'un match\n| score \t| \tScore d'un match\n| gain perdant \t| \tGain du perdant d'un match\n| numéro arbitre \t| \tIdentifiant de ARBITRE\n| nom arbitre \t| \tNom de l'arbitre d'un match\n\t\n\n#### Graphe des dépendances fonctionnelles\n\n![](/images/td/tournois/tournois_DF.png){fig-align=\"center\"  width=\"80%\"}\n\n#### Mise en place des associations \n\n- **Les dépendances fonctionnelles** : l'étude du graphe des dépendances fonctionnelles permet de déduire immédiatement les associations binaires qui sont des dépendances fonctionnelles :\n  + **Association «appartient»** entre MATCH et TOURNOI\n  + **Association «se situe»** entre LIEU et PAYS. Si lieu était une propriété de TOURNOI comme évoqué précédemment, alors cette association lierait TOURNOI à PAYS. Étant donné le graphe des dépendances fonctionnelles (numéro tournoi $\\rightarrow$ nom lieu $\\rightarrow$ nom pays), cette association aurait des instances redondantes, ce qui est à éviter.\n  + **Association «se déroule»** entre TOURNOI et LIEU pour compléter la précédente.\n  + **Association «de type»** entre MATCH et TYPE.\n  + **Association «arbitré par»** entre MATCH et ARBITRE.\n  + **Association «de tour»** entre MATCH et TOUR.\n\n- **La nationalité** : Un joueur peut avoir à une période plusieurs nationalités, une seule, ou bien encore aucune. On crée une association «de nationalité» entre JOUEUR, PAYS et DATE, l'arête sur DATE correspondant à la date d'acquisition de la nationalité. On ajoute une propriété date de fin correspondant à la date à laquelle un joueur perd une nationalité.\n  \n- **Les entraîneurs** : Un joueur peut avoir à une période plusieurs entraîneurs, un seul, ou bien encore aucun. On crée une association «est entraîné par» entre JOUEUR, ENTRAÎNEUR et DATE, l'arête sur DATE correspondant à la date de début de la coopération entre le joueur et l'entraîneur. On ajoute une propriété date de fin correspondant à la fin de cette coopération.\n  \n- **La composition des matchs** : on peut envisager trois solutions :\n    + *Première solution* : Une association «participer» indique les compositions des matches. Une association «gagner» indique le ou les gagnants (double). \n    + *Seconde solution* : une association «participer» portant une propriété prenant la valeur vrai ou faux selon que le joueur a gagné ou non.\n    + *Troisième solution* : deux associations «gagner» et «perdre». \n\n  Pour les solutions 1 et 3, il faut compléter le MCD par des contraintes interassociation. C'est la solution 2 qui est choisie pour des raisons de simplicité.\n\n- **Le prix d'un tournoi** : d'après numéro tournoi + type $\\rightarrow$ prix, on créer une association «recevoir prix» entre TOURNOI et TYPE ayant la propriété Prix tournoi.\n- **Le gain du perdant** : d'après numéro tournoi+type+tour $\\rightarrow$ gain perdant, on créer une association ternaire «recevoir gain» entre TOURNOI, TOUR et TYPE ayant la propriété Prix tournoi. Ce qui signifie que pour un tour d'un tournoi, tous les matches de même type ont la même valeur de gain perdant. \n\n#### MCD Complet\n\n![](/images/td/tournois/tournois_MCD.png){fig-align=\"center\" width=\"80%\"}\n\n\n:::\n\n\n\n\n## Exercice 2\n\nUn grand organisme dispose de véhicules de service. Ceux-ci peuvent être prêtés aux membres du personnel pour effectuer des missions.\n\n- Le système d'information à concevoir doit être en mesure de gérer l'historique des interventions sur les véhicules (réparations et entretiens périodiques). \n- Il doit également permettre de connaître les principaux utilisateurs (personne et service utilisateur) de manière à pouvoir dresser des statistiques d'utilisation. \n- Il sera possible de connaître à tout moment si un véhicule est disponible. \n- Enfin il doit être possible de connaître la liste prévisionnelle des véhicules à envoyer à l'entretien.\n\n#### Types de résultats attendus\n\n- Liste des véhicules disponibles.\n- Liste prévisionnelle des entretiens à effectuer.\n- Coût au km des réparations pour un véhicule.\n- Coût au km des entretiens pour un véhicule.\n- Coût au km (tout frais confondus) pour un véhicule. \n- Nombre de kilomètres parcourus par une personne.\n- Nombre de kilomètres parcourus par l'ensemble des personnes d'un service...\n  \n#### Phrases du système d'information\n\n- Monsieur Jean-Baptiste LAGAFFE a emprunté le véhicule DJ-325-KN du 20/05/24 à 13h au 23/05/24 à 17h et a parcouru 596 km, la facture d'essence s'élevant à 60 €.\n- Le garage RENÉ CETOUFER a réparé le véhicule DJ-325-KN du 12/05/24 au 15/05/24, le montant de l'intervention s'est élevé à 2200 € TTC.\n- Les Renault Clio full hybrid E-Tech doivent être portées en révision aux kilométrages suivants 5 000, 10 000 puis tous les 25 000 kilomètres. \n- La voiture FV-861-GH est une Renault Clio full hybrid E-Tech achetée le 3/09/2025.\n\n#### Précision sur le système d'information \n- Une personne ne dépend que d'un service.\n\n\n\n::: {.content-visible when-profile=\"solution\"}\n\n\n### <span style=\"color:green;\">Solution</span>\n\n#### Dictionnaire des données\n\n| Nom | Signification |\n|:-|:---|\n| N° immatriculation\t|  |\n| Type véhicule\t| Modèle |\n| Date achat\t| Date d'achat d'un véhicule par la société |\n| Kilométrage\t| Kilométrage total d'un véhicule de la société |\n| Kilométrage révision | \tKilométrage pour lequel un type de véhicule doit être révisé |\n| Nom emprunteur\t| Nom de membre du personnel emprunteur |\n| Nom service\t| Nom de service de la société |\n| Date emprunt\t| Date d'emprunt d'un véhicule par un membre du personnel |\n| Heure emprunt\t| Heure d'emprunt d'un véhicule par un membre du personnel |\n| Date retour\t| Date de retour d'un véhicule par un membre du personnel |\n| Heure retour\t| Heure de retour d'un véhicule par un membre du personnel |\n| Nbre kilomètres\t| Nombre de kilomètres parcourus lors d'un emprunt |\n| Montant facture essence\t| Montant de la facture de carburant lors d'un emprunt |\n| Prix réparation\t| Prix d'une réparation d'un véhicule |\n| Date début réparation\t| Date de début de la réparation d'un véhicule |\n| Date fin réparation\t| Date de fin de la réparation d'un véhicule |\n| Prix révision\t| Prix d'une réparation d'un véhicule |\n| Date début révision\t| Date de début de la révision d'un véhicule |\n| Date fin révision\t| Date de fin de la réparation d'un véhicule |\n| Nom garage | | \n\n#### Recherche des entités et de leurs identifiants\n\n- **Entité VÉHICULE**, identifiant : N° d'immatriculation\n- **Entité EMPRUNTEUR**, identifiant : N° emprunteur\n- **Entité SERVICE**, identifiant : Nom service\n- **Entité GARAGE**, identifiant : N° garage\n- **Entité TYPE DE VÉHICULE**, identifiant : N° type. En effet, comme kilométrage révision dépend du type de véhicule, il s'agit bien d'une entité.\n\n#### Recherche des propriétés des entités\nOn essaie d'attribuer les propriétés restantes en vérifiant à chaque fois la règle de dépendance fonctionnelle directe et complète des propriétés par rapport à l'identifiant.\n\n-  **Date achat** : propriété de l'entité VÉHICULE, on a bien N° immatriculation $\\rightarrow$ Date achat\n-  **Kilométrage** : propriété de l'entité VÉHICULE, on a bien N° immatriculation $\\rightarrow$ Kilométrage\n-  **Kilométrage révision** ? Pour un type de véhicule, il y a plusieurs occurrences de kilométrage de révision, ce n'est donc pas une propriété de type de véhicule. Nous verrons lors de l'étude des associations comment régler ce problème.\n-  **Nom type** : propriété de l'entité TYPE DE VÉHICULE, on a bien N° type $\\rightarrow$ Nom type.\n-  **Nom emprunteur** : propriété de l'entité EMPRUNTEUR, on a bien N° emprunteur $\\rightarrow$ Nom emprunteur\n-  **Données concernant un emprunt** : Date emprunt, Heure emprunt, Date retour, Heure retour, Montant facture essence. Elles ne sont pas uniques, ni pour un emprunteur, ni pour un véhicule et ne sont donc pas des propriétés de ces entités. \n-  **Données concernant une réparation ou une révision** : Prix réparation, Date début réparation, Date fin réparation, Prix révision, Date début révision, Date fin révision. Elles ne sont pas uniques, ni pour un garage, ni pour un véhicule et ne sont donc pas des propriétés de ces entités.\n-  **Nom garage** : propriété de l'entité GARAGE, on a bien N° garage $\\rightarrow$ Nom de garage\n  \n#### Mise en place des associations \n- Les **dépendances fonctionnelles** :\n  +  Association «attaché» entre EMPRUNTEUR et SERVICE : tout emprunteur est attaché à un service et un seul.\n  +  Association «est de» entre VÉHICULE et TYPE : tout véhicule est d'un type et un seul.\n- **Réparations** :\n  Parmi les propriétés non encore mises en place, il a Prix réparation, Date début réparation, Date fin réparation.<br>\n  Le prix d'une réparation est unique pour un véhicule et une date/heure. \n  On a donc la dépendance fonctionnelle : (N° d'immatriculation, date début réparation) $\\rightarrow$ Prix réparation<br>\n  Le prix d'une réparation est donc une propriété de l'association «réparer».\n  \n  ![](/images/td/locvehicules/locvehicules_reparer1.png){fig-align=\"center\" width=\"50%\"}\n\n  Nous avons ici signifié qu'un véhicule a été porté en réparation à une date/heure, il reste à représenter la date de retour du véhicule. La solution consistant à modéliser comme ci dessous est erronée :\n\n  ![](/images/td/locvehicules/locvehicules_reparer2.png){fig-align=\"center\" width=\"50%\"}\n\n  En effet, à un moment donné dans ce système d'information certaines occurrences de l'association «réparer» sont à trois arêtes (les réparations terminées), alors que d'autres sont à deux arêtes (les réparations en cours). Ceci est interdit. De plus, l'arête (retour) sur DATE est inutile pour identifier l'association.\n\n  Nous avons donc le choix entre deux modélisations possibles. \n\n  - **La première** consiste à créer une propriété Durée ou Date de retour dans l'association «réparer».\n  \n  ![](/images/td/locvehicules/locvehicules_reparer3.png){fig-align=\"center\" width=\"50%\"}\n\n   -  **La seconde** à créer une autre association : «revenir de réparation». Lors de l'insertion d'une occurrence de «revenir de réparation», il faut vérifier que celle-ci correspond à une occurrence de «porter à réparer». Pour cela, il faut ajouter une contrainte d'intégrité d'inclusion entre les deux associations.\n  \n   ![](/images/td/locvehicules/locvehicules_reparer4.png){fig-align=\"center\" width=\"50%\"}\n\n  La  première solution est la meilleure car elle est plus simple. \n\n  Pour représenter le fait qu'un véhicule est porté en réparation dans un garage, on ne peut ranger «Nom garage» dans l'association car il existe déjà une entité GARAGE (une propriété se trouve à un seul endroit du modèle). **Il faut alors ajouter alors une arête à l'association «réparer»** qui indiquera le garage concerné par la réparation. \n\n-  **Les révisions** : le même raisonnement est tenu pour les associations «réviser» et «emprunter». Les propriétés «Prix révision» et «Durée révision» sont rangées dans «réviser».<br>\n \n![](/images/td/locvehicules/locvehicules_reviser.png){fig-align=\"center\" width=\"50%\"}\n\n-  **Emprunt** : les emprunts sont modélisés par une association «emprunter» entre VÉHICULE, EMPRUNTEUR et DATE conformément à la gestion classique du temps. A noter que la date est en fait une date/heure puisque les heures sont nécessaires au SI. On pourrait introduire une entité EMPRUNT mais cela ne doit être fait que s'il existe déjà un identifiant (un numéro d'emprunt) dans la gestion de la société ou bien si la vérification des règles de normalisation nous y contraint.\n  Les propriétés Montant facture essence, Nbre kilomètres et Durée emprunt sont rangés dans «emprunter», et une contrainte d'intégrité fonctionnelle est placée entre «emprunter» et EMPRUNTEUR, puisqu'à un moment donné pour un VÉHICULE il n'y a qu'un emprunteur.\n  \n-  **Kilométrage révision** : nous avons vu que cette donnée n'est pas une propriété d'une des entités existante car elle n'est en dépendance fonctionnelle d'aucune autre donnée élémentaire. Il faut nécessairement créer une entité LIMITE avec pour identifiant Kilométrage révision. L'association «à réviser» enregistre les kilométrages de révisions d'un type de véhicule.\n\n![](/images/td/locvehicules/locvehicules_limite_revision.png){fig-align=\"center\" width=\"60%\"}  \n\n#### MCD Complet\n\n![](/images/td/locvehicules/locvehicules_MCD.png){fig-align=\"center\" width=\"70%\"}\n\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}