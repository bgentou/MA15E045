{
  "hash": "af02188fe6f6216362cbac290d3355ee",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"TD 8 : Modélisation\"\nsubtitle: \"Modélisation conceptuelle avancée\"\ncategories: [Modélisation, MCD, EA, contraintes]\ndate: \"2025-11-21\"\n\n\nformat:\n  pdf:\n    output-file: td8.pdf\n    include-in-header:\n      - text: \"\\\\lhead{{\\\\sf  Base de données \\\\\\\\ TD 8: Modélisation conceptuelle avancée}}\"\n  html:\n    output-file: td8.html\n\nengine: knitr\n---\n\n\n::: {.content-visible when-profile='solution'} \n\n::: {.callout-warning}\n\n### Avec solutions\n\n:::\n\n:::\n\n\n\n::: {layout=\"[80,20]\"}\n\n::: {#first-column}\n\n|                            |\n|:---------------------------|\n| {{< var curriculum >}}     |\n| {{< var university >}}     |\n| [Année {{< var year >}}]() |\n| {{< var homepage >}}       |\n| {{< var moodle >}}         |\n\n\n::: \n\n::: {#second-column}\n![](../images/UniversiteParis_monogramme_couleur_RVB.png){align=\"right\" style=\"size:50px;\" width=75}\n:::\n\n:::\n\n\n\n::: {.callout-important title=\"Objectifs\"}\n\nL'objectif de cette séance est de compléter des diagrammes E/A avec les outils vus en cours :\n\n- entités faibles,\n- spécialisation et contraintes de spécialisation,\n- contraintes d'intégrité référentielle,\n- contraintes inter-association. \n\n:::\n\n## Exercice (Supermarché : modèle miniature)\n\nOn étudie une partie du SI d'un supermarché concernant la mise en rayon des produits et on a collecté les informations suivantes :\n\n- Chaque *produit* a un *nom* et un *prix* et appartient à une *catégorie*. \n- Le supermarché a plusieurs *rayons*, un rayon étant caractérisé par un *étage* et un *numéro de rangée*. \n- Les produits d'une même catégorie sont placés dans le même rayon, mais un rayon peut contenir des produits de plusieurs catégories.\n  \n::: {.callout-note}\n\n### Question \n\nConcevoir un diagramme E/A de ce SI. \nVérifier que ce diagramme modélise toutes les informations fournies. \n\n:::\n\n::::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\nOn distingue les entités :\n\n- *PRODUIT* : *nom*, *prix*.\n- *RAYON* : *étage*, *numéro-rangée*.\n- *CATEGORIE*.\n\nPuis les associations :\n\n- *appartient* entre *PRODUIT* et *CATEGORIE*.\n- *est-placé* entre *CATEGORIE* et *RAYON*.\n\nLes cardinalités qui sont bien décrites par l'énoncé :\n\n- *1:1* pour *appartient* du côté de *PRODUIT*.\n- max *n* pour *appartient* du côté de *CATEGORIE*.\n- max *1* pour *est-placé* du côté de *CATEGORIE*.\n- max *n* pour *est-placé* du côté de *RAYON*.\n\nLes cardinalités qui ne sont pas décrites par l'énoncé :\n\n- min *0* ou *1* pour *appartient* du côté de *CATEGORIE*.\n- min *0* ou *1*  pour *est-placé* du côté de *CATEGORIE*.\n- min *0* ou *1*  pour *est-placé* du côté de *RAYON*.\n\n\nUn MCD possible avec cardinalité est :\n\n![](/images/td/supermarche/MCD_supermarche.png){fig-align=\"center\"}\n\n:::::\n\n\n::: {.callout-note}\n\n### Question \n\nFaut-il compléter le diagramme E/A ? \n\n:::\n\n::::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\nLe MCD proposé traduit complètement les spécifications de l'énoncé.\n\n\n:::::\n\n\n## Exercice (Tournois)\n\nLors du dernier TP, vous avez étudié un SI portant sur des tournois.\n\nLe diagramme E/A proposé est le suivant :\n\n![](/images/td/tournois/tournois_MCD.png){fig-align=\"center\" width=\"100%\"}\n\n::: {.callout-note}\n\n### Question \n\nIl est décidé d'utiliser pour les identifiants des matchs la méthode suivante : pour un tournoi et un type de match (simple F, simple H, etc.) le match n°1 est la finale, les n°2 et 3 sont les demi-finales, etc.\n\nComment faut-il modifier le modèle ? \n\n:::\n\n::::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\nIl faut faire les modifications suivantes :\n\n- *MATCH* devient une entité faible,\n- *appartient* est une association faible identifiante entre *TOURNOI* (entité forte) et *MATCH*,\n-  *de type* est une association faible identifiante entre *TYPE* (entité forte) et *MATCH*,\n-  l'identifiant de *MATCH* devient : *numéro_tournoi+type+numéro_match*.\n-  les cardinalités sont inchangées ainsi que les autres associations auxquelles participent *MATCH*.\n\n:::::\n\n\n\n::: {.callout-note}\n\n### Question\n\nY-a-t-il des contraintes d'intégrité fonctionnelle (CIF) ?\n\nPour rappel, les CIF concernent les liaisons de cardinalité maximale $n$ dans les associations ternaires. \n\n- si parmi les occurences de l'association $A$, on a une dépendance fonctionnelle $E_1 \\rightarrow E_2$, on dit qu'on a une CIF $E_1 \\rightarrow E_2$ par rapport à $A$.\n- si parmi les occurences de l'association $A$, on a une dépendance fonctionnelle $(E_1, E_2) \\rightarrow E_3$, on dit qu'on a une CIF $(E_1,E_2) \\rightarrow E_3$ par rapport à $A$.\n\nPar exemple, si on supposait qu'un joueur ne peut pas avoir deux entraineurs en même temps (ce qui n'est pas dit dans l'énoncé), on aurait une CIF (JOUEUR, DATE) $\\rightarrow$ ENTRAINEUR par rapport à l'association \"est entrainé par\".\n\nEn reprenant la représentation du cours, on écrit :\n\n![](/images/td/tournois/tournois_CIF1.png){fig-align=\"center\" width=\"60%\"}\n\n\nMais pour les CIF du type $(E_1, E_2) \\rightarrow E_3$, le formalisme suivant est lisible :\n\n![](/images/td/tournois/tournois_CIF.png){fig-align=\"center\" width=\"60%\"}\n\nCette CIF dit la chose suivante : deux entraineurs différents ne peuvent pas commencer à entrainer un même joueur à la même date.\n\nEst-ce que cette CIF suffit à décrire la totalité de la contrainte ? Que faut-il vérifier au-delà ?\n\n:::\n\n::::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\nDans le dernier exemple de la question, la CIF ne suffit à traduire toute la contrainte car il faut vérifier que les périodes pendant lesquelles deux entrainteurs différents entraînent un même joueur sont disjointes, tandis que la CIF impose seulement que les débuts de ces deux périodes sont différents.\n\nPour le MCD de tournoi, il n'y a pas de CIF à ajouter. On les recherche sur les associations non binaires :\n\n- *est entrainé par* : pas de CIF.\n- *recevoir gain* : pas de CIF.\n- *de nationalité* : on pourrait imaginer une CIF  *(JOUEUR, DATE)* $\\rightarrow$ *PAYS* mais un joueur peut avoir simultanément plusieurs nationalités.\n\n\n:::::\n\n\n::: {.callout-note}\n\n### Question\n\nPour la composition des matchs, on pouvait envisager trois solutions :\n\n- *Première solution* : Une association «participer» indique les compositions des matches. Une association «gagner» indique le ou les gagnants (double). \n- *Seconde solution* : une association «participer» portant une propriété prenant la valeur vrai ou faux selon que le joueur a gagné ou non.\n- *Troisième solution* : deux associations «gagner» et «perdre». \n\nSi on choisit la première ou la troisième solution, quelle contrainte faut-il ajouter ?\n\nParmi les trois solutions, lesquelles permettent de décrire complètement le SI ?\n\nPourquoi a-t-on choisi la deuxième solution ?\n\n:::\n\n::::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\nIl faut ajouter des contraintes inter-associations :\n\n-  *Première solution* : une contrainte d'inclusion entre *gagner*  et *participer*.  \n- *Troisième solution* : une contrainte d'exlusion entre *gagner* et *perdre*. \n\nDans la deuxième solution, ces deux contraintes sont respectées sans ajout au modèle E/A. Cette solution est donc plus simple à implémenter.\n\nMais dans tous les cas, cela ne suffit pas à décrire toutes les contraintes du SI :\n\n - dans un match simple, il y a exactement 1 gagnant et 1 perdant.\n - dans un match double, il y a exactement 2 gagnants et 2 perdants.\n\nCes contraintes ne peuvent pas être décrites dans le modèle E/A étendu.\n\n:::::\n\n\n## Exercice (Location de voitures)\n\nOn étudie une partie du SI d'une société de location de véhicules.\n\nLa société gère un parc de voiture. On a reccueilli les informations suivantes :\n\n- Chaque véhicule a une plaque d'immatriculation, une couleur, une marque et un modèle. \n\n- Un modèle a un nom, une marque, un nombre de sièges, un volume de chargement. \n\n- Chaque véhicule appartient obligatoirement à une et une seule catégorie qui détermine le tarif de la location. \n\n- Tous les véhicules du même modèle appartiennent à la même catégorie.\n\n::: {.callout-note}\n\n### Question\n\nEcrire le diagramme des dépendances fonctionnelles de ce SI (Voir la correction du TP précédent)\n\n:::\n\n::::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\nOn a les dépéndances fonctionnelles suivantes :\n\n![](/images/td/leasing/DF_leasing.png){fig-align=\"center\" width=\"50%\"}\n\nOn n'a pas représenté les dépendances indirectes indiquées dans l'énoncé qui se déduisent du diagramme par transitivité :\n\n- *id véhicules* $\\rightarrow$ *marque*.\n- *id véhicules* $\\rightarrow$ *catégorie*.\n\n\n:::::\n\n\n::: {.callout-note}\n\n### Question\n\nA l'aide du diagramme précédent, écrire le diagramme E/A de ce SI.\n\n:::\n\n\n::::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\nOn déduit du diagramme des dépendances fonctionnelles le MCD suivant :\n\n![](/images/td/leasing/MCD_leasing.png){fig-align=\"center\" width=\"60%\"}\n\n:::::\n\n\n::: {.callout-note}\n\n### Question\n\nOn veut maintenant distinguer les véhicules *disponibles* des\nvéhicules en *location* :\n\n- Pour les véhicules disponibles, on enregistre l'agence où le véhicule est disponible. Une agence a un numéro, une adresse, un numéro de téléphone, un email...\n- Pour les véhicules en location, on enregistre le client, la date\net la durée de la location. Un client a un numéro, une adresse, un numéro de téléphone, un email...\n\nCompléter le diagramme E/A pour modéliser cette partie du SI.\n\nFaut-il ajouter des contraintes ?\n\n:::\n\n::::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\nOn ajoute 2 entités :\n\n- *AGENCE* : attributs *nunméro* (identifiant), *adresse*, *téléphone*, *email*.\n- *CLIENT* : attributs *numéro* (identifiant), *adresse*, *téléphone*, *email*.\n\nEt 2 associations :\n\n- *est disponible* entre *VEHICULE* et *AGENCE*. \n- *est loué* entre *VEHICULE* et *CLIENT* : attributs *date*, *durée*.\n\n**Si on considère que le SI ne conserve pas l'historique des locations et des disponibilités**, ou qu'on choisit de le faire par d'autres associations, on a les cardinalités *0:1* du côté de *VEHICULE* pour les deux associations.\n\nOn a alors aussi une contrainte de partitionnement entre les véhicules disponibles et les véhicules loués que l'on peut représenter complètement par une contrainte inter-association de totalité et d'exclusion entre les deux associations du côté de *VEHICULE*.\n\n![](/images/td/leasing/MCD_leasing_Agence-Client.png){fig-align=\"center\" height=\"25%\"}\n\n\n:::::\n\n\n::: {.callout-note}\n\n### Question\n\nMaintenant, on s'intéresse à l'entretien des véhicules :\n\n- certains véhicules sont possédés par la société et sont entretenus chacun  par un unique garage. Chaque garage a un numéro, un n°SIRET, une adresse, un IBAN, etc. On ne conserve pas l'historique des garages qui ont entretenu le véhicule.\n\n- les autres véhicules sont en leasing auprès de sociétés spécialisées dans ce type de location. Chaque société a un numéro, un n°SIRET, une adresse, un IBAN, etc. \n\n  + certains de ces véhicules sont entretenus par la société de leasing.\n  + les autres sont entretenus par la société de location dont on étudie le SI, selon le même principe que pour les véhicules qui lui appartiennent.\n\nOn essaie de modéliser cette partie du SI uniquement avec les entités VEHICULE, GARAGE, SOCIETE DE LEASING.\n\nProposer une ou des modélisations E/A et utiliser des contraintes pour décrire complètement le SI décrit.\n\n:::\n\n::::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\nIl faut essayer de traduire au mieux et le plus simplement possible la partition de l'ensemble des véhicules en 3 groupes :\n\n- les véhicules possédés en propre qui doivent être entretenus par un garage.\n- les véhicules en leasing sans entretien inclus qui doivent être entretenus par un garage.\n- les véhicules en leasing avec entretien inclus qui ne doivent pas être entretenus par un garage.  \n\n#### Solution avec 2 associations binaires\n\n- *entretient* entre *GARAGE* et *VEHICULE*.\n- *loue* entre *SOC LEASING* et *VEHICULE* avec un attribut booléen pour enregistrer si l'entretien est inclus dans la location.\n\n![](/images/td/leasing/MCD_leasing_entretien-2asso-bin.png){fig-align=\"center\"  height=\"20%\"}\n\nCette solution a l'avantage de la simplicité et est proche de la pratique des utilisateurs (l'entretien par un garage est une option du leasing) mais le partitionnement n'est pas vérifiable facilement. \n\nOn peut représenter une contrainte de totalité entre les 2 associations par rapport à *VEHICULE*, mais on ne peut représenter la contrainte de partitionnement.\n\n#### Solution avec 3 associations\n\n- *entretient* entre *GARAGE* et *VEHICULE*.\n- *loue sans entretien* entre *SOC LEASING* et *VEHICULE* pour le leasing sans entretien inclus.\n- *loue avec entretien* entre *SOC LEASING* et *VEHICULE* pour le leasing avec entretien inclus.\n\n![](/images/td/leasing/MCD_leasing_entretien-3asso-bin.png){fig-align=\"center\"  height=\"20%\"}\n\nCette solution reste proche de la pratique des utilisateurs et permet de représenter fidèlement la contrainte de partitionnement mais les 3 contraintes sont complexes à vérifier. \n\n*Conclusion* : on peut inventer d'autres solutions mais aucune n'est bien satifsfaisante.\n\n:::::\n\n\n::: {.callout-note}\n\n### Question\n\nComme les solutions précédentes ne sont pas très satisfaisante, on décide d'utiliser des spécialisations de l'entité VEHICULE.\n\nProposer un nouveau modèle E/A et compléter le pour décrire complètement le SI.\n\n:::\n\n::::: {.content-visible when-profile=\"solution\"}\n\n### <span style=\"color:green;\">Solution</span>\n\nAvec des spécialisations, on peut représenter le SI de manière plus satisfaisante.\n\n![](/images/td/leasing/MCD_leasing_entretien-specialisation.png){fig-align=\"center\"  height=\"40%\"}\n\nLa traduction en MRD ne justifie pas la création d'une table pour chaque spécialisation si elles ne contiennent pas d'attributs propres.\n\nOn traduira le MCD en MRD ainsi :\n\n- ajout à *VEHICULE* de 2 attributs booléens : *entretien* et *leasing*. \n- La contrainte de partitionnement entre les spécialisations est équivalente à la contrainte (*entretien* ou *leasing*) = VRAI pour chaque ligne de la table. Elle est facile à coder en SQL et peu couteûse en calculs.\n- Les 2 associations *entretient* de type 1 à plusieurs sont codées par l'ajout dans la table *VEHICULE* d'une seule clé étrangère *garage* qui référence le numéro du garage qui effectue l'entretien. Il faut coder la contrainte *entretien* $\\Leftrightarrow$ *garage* IS NOT NULL.\n- Les 2 associations *loue* de type 1 à plusieurs sont codées par l'ajout dans la table *VEHICULE* d'une seule clé étrangère *soc leasing* qui référence le numéro de la société qui effectue le leasing. Il faut coder la contrainte *leasing* $\\Leftrightarrow$ *soc leasing* IS NOT NULL.\n\nC'est finalement un modèle relationnel proche ou identique à celui obtenu par conversion du premier MCD de la question précédente avec 2 associations. Mais il représente mieux le SI et permet un meilleur travail.\n\n:::::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}