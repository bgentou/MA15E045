{
  "hash": "6a132f279941a6d30cb48bcf3f8c9a6f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Schéma : world\"\ncategories: [world, crowfoot, DDL]\nsubtitle: \"world, relationnel, pattes de corbeau, crowfoot\"\ndate: \"2024-09-20\"\n\nformat:\n  pdf:\n    code-annotations: below\n    keep-tex: false\n    code-fold: false\n    toc: false\n    output-file: schema-world.pdf\n    include-in-header:\n      - text: \"\\\\lhead{{\\\\sf  Base de données \\\\\\\\ Schema world}}\"\n  html:\n    embed-resources: true\n    code-fold: true\n    output-file: schema-world.html\nparams:\n    year: 2024 \n    curriculum: \"L3 MIASHS/Ingémath\"\n    university: \"Université Paris Cité\"\n    homepage: \"https://bgentou.github.io/MA15E045/\"\n    moodle: \"https://moodle.u-paris.fr/course/view.php?id=2313\"\n\nengine: knitr\n---\n\n\n::: {.callout-warning}\n\nPrésentation du schéma `world`, pour l'entrainement à PostGres. \n\n-\n\n::: \n\n\n::: {layout=\"[80,20]\"}\n\n::: {#first-column}\n\n\n- **L3 MIASHS/Ingémath**\n- **[Université Paris Cité](https://www.u-paris.fr)**\n- Année 2024-2025\n- [Course Homepage](https://bgentou.github.io/MA15E045/)\n- [Moodle](https://moodle.u-paris.fr/course/view.php?id=2313)\n\n::: \n\n::: {#second-column}\n![](../images/UniversiteParis_monogramme_couleur_RVB.png){align=\"right\" style=\"size:50px;\" width=75}\n:::\n\n:::\n\n\n\nCréé avec  [DbSchema](https://dbschema.com)\n\n\n## Contexte\n\n`world` est un schéma formé par trois tables `country`, `city` et `countrylanguage`. Les instances de ce schéma sont censées fournir des données de géographie politique : un état du monde à une date donnée. \n\nLa table `country` nous renseigne sur les états reconnus (à l'ONU) et sur des territoires jugés plus ou moins autonomes [Dépendances](https://fr.wikipedia.org/wiki/Liste_des_dépendances_et_territoires_à_souveraineté_spéciale), [Territoires non autonomes](https://fr.wikipedia.org/wiki/Liste_des_territoires_non_autonomes_selon_l%27Organisation_des_Nations_unies)\n \n\nLa table `city`  nous renseigne sur les villes les plus importantes de chaque territoire.\n\nLatable `countrylanguage` nous indique quelles langues sont parlées dans quels pas.\n\nL'instance du schéma utilisée donne une idée du monde au début des années 2000. \n\n## Diagrammme en pattes de corbeau (crowfoot)\n\nUn diagramme en pattes de corbeau est formé par les tables (pour chaque colonne/attribut, nom et domaine)\net des arcs qui décrivent des *contraintes référentielles*.\n\n![Schéma world en pattes de corbeau](/images/schema-world.png)\n\n\n\n## Table world.country \n\n\n::: {.smaller}\n\n|Idx |Name |Data Type |Description |\n|---|---|---|---|\n| * &#128273;  &#11019; | countrycode| char(3)  |  Code ISO à 3 symboles |\n| * | name\\_country| text  | Nom du territoire en Anglais |\n| * | continent| text  |  |\n| * | region| text  |  |\n| * | surfacearea| real  | Surface en Km2 |\n|  | indepyear| smallint  | Année de fondation/indépendance |\n| * | population\\_country| integer  | Nombre d'habitants |\n|  | lifeexpectancy| real  |  Espérance de vie à naissance|\n|  | gnp| numeric(10,2)  |  PIB  (en Millions de USD?) |\n|  | gnpold| numeric(10,2)  |  |\n| * | localname| text  | Nom du territoire dans les langues officielles |\n| * | governmentform| text  | Type de régime |\n|  | headofstate| text  | Chef de l'état  |\n| &#11016; | capital| integer  | Identifiant (`id`) de la capitale dans `city`  |\n| * | code2| char(2)  | Code ISO à 2 symboles |\n\n\n`gnp` est formé par les initiales de `Gross National Product` ([Produit National Brut](https://fr.wikipedia.org/wiki/Produit_national_brut)), un indicateur de revenu défini par les économistes.\n\n`lifeexpectancy` (espérance de vie à la naissance) est un indicateur de santé publique construit par les démographes. Ce n'est pas l'âge moyen au décès.\n\n:::\n\nChaque ligne de `country` est identifiée par la valeur de `countrycode`. Cet attribut ne peut pas être `NULL`. Deux lignes distinctes de `country` ne peuvent coïncider sur l'attribut `countrycode`.\n\nL'attribut `countrycode` peut être utilisé pour désigner une ligne de la table `country`. Cette possibilité est utilisée dans les tables `city` et `countrylanguage`\n\nEn jargon, l'attribut `countrycode` sert de *clé primaire* à la table `country`\n\n\nUn extrait de la table concernant les pays de région `Western Europe` permet de comprendre au moins une partie de la signification et des usages des colonnes\n\n\n::: {.smaller}\n\n\n| countrycode | code2 | name_country | localname | governmentform | headofstate | capital |\n|-----------|-----|------------|---------|--------------|-----------|-------|\n| NLD | NL | Netherlands | Nederland | Constitutional Monarchy | Beatrix | 5 |\n| BEL | BE | Belgium | België/Belgique | Constitutional Monarchy, Federation | Albert II | 179 |\n| AUT | AT | Austria | Österreich | Federal Republic | Thomas Klestil | 1523 |\n| LIE | LI | Liechtenstein | Liechtenstein | Constitutional Monarchy | Hans-Adam II | 2446 |\n| LUX | LU | Luxembourg | Luxembourg/Lëtzebuerg | Constitutional Monarchy | Henri | 2452 |\n| MCO | MC | Monaco | Monaco | Constitutional Monarchy | Rainier III | 2695 |\n| FRA | FR | France | France | Republic | Jacques Chirac | 2974 |\n| DEU | DE | Germany | Deutschland | Federal Republic | Johannes Rau | 3068 |\n| CHE | CH | Switzerland | Schweiz/Suisse/Svizzera/Svizra | Federation | Adolf Ogi | 3248 |\n\n\n:::\n\n\n\n### Foreign Keys (clée étrangères)\n\nLa colonne `capital` ne contient pas les noms de capitale (il existe des territoires sans capitale), \nelle contient des entiers (ou `NULL`) qui renvoient à des lignes dans la table `city`.\n\n\n::: {.smaller}\n\n\n|Type |Name |On |\n|---|---|---|\n|  | country_capital_fkey | ( capital ) ref [world.city](#city) (id) |\n\n:::\n\n\n### Constraints\n\nLe domaine de la colonne (de l'atttribut) `continent` est un type énuméré (défini en extension). \n\n|Name |Definition |\n|---|---|\n| country_continent_check | ((continent = 'Asia'::text) OR (continent = 'Europe'::text) OR (continent = 'North America'::text) OR (continent = 'Africa'::text) OR (continent = 'Oceania'::text) OR (continent = 'Antarctica'::text) OR (continent = 'South America'::text)) |\n\n\n## Table world.city \n\n\n::: {.smaller} \n\n\n|Idx |Name |Data Type |\n|---|---|---|\n| * &#128273;  &#11019; | id| integer  |\n| * | name| text  |\n| * &#11016; | countrycode| char(3)  |\n| * | district| text  |\n| * | population| integer  |\n\n:::\n\n\nChaque ligne de `city` est identifiée par la valeur de `is`. Cet attribut ne peut pas être `NULL`. Deux lignes distinctes de `city` ne peuvent coïncider sur l'attribut `id`. \n\n\n\n\n### Foreign Keys\n\n\nLa colonne `countrycode` ne contient pas les noms des pays, mais le code à 3 symboles du territoire \noù se situe la ville\n\n\n::: {.smaller}\n\n|Type |Name |On |\n|---|---|---|\n|  | city_country_fk | ( countrycode ) ref [world.country](#country) (countrycode) |\n\n:::\n\n\nL'extrait suivant correspond au villes du pays nommé `France`.\n\n\n| id | name | district | population |\n|--|----|--------|----------|\n| 2974 | Paris | Île-de-France | 2125246 |\n| 2975 | Marseille | Provence-Alpes-Côte | 798430 |\n| 2976 | Lyon | Rhône-Alpes | 445452 |\n| 2977 | Toulouse | Midi-Pyrénées | 390350 |\n| 2978 | Nice | Provence-Alpes-Côte | 342738 |\n| 2979 | Nantes | Pays de la Loire | 270251 |\n| 2980 | Strasbourg | Alsace | 264115 |\n| 2981 | Montpellier | Languedoc-Roussillon | 225392 |\n| 2982 | Bordeaux | Aquitaine | 215363 |\n| 2983 | Rennes | Haute-Normandie | 206229 |\n| 2984 | Le Havre | Champagne-Ardenne | 190905 |\n| 2985 | Reims | Nord-Pas-de-Calais | 187206 |\n| 2986 | Lille | Rhône-Alpes | 184657 |\n| 2987 | St-Étienne | Bretagne | 180210 |\n| 2988 | Toulon | Provence-Alpes-Côte | 160639 |\n| 2989 | Grenoble | Rhône-Alpes | 153317 |\n| 2990 | Angers | Pays de la Loire | 151279 |\n| 2991 | Dijon | Bourgogne | 149867 |\n| 2992 | Brest | Bretagne | 149634 |\n| 2993 | Le Mans | Pays de la Loire | 146105 |\n| 2994 | Clermont-Ferrand | Auvergne | 137140 |\n| 2995 | Amiens | Picardie | 135501 |\n| 2996 | Aix-en-Provence | Provence-Alpes-Côte | 134222 |\n| 2997 | Limoges | Limousin | 133968 |\n| 2998 | Nîmes | Languedoc-Roussillon | 133424 |\n| 2999 | Tours | Centre | 132820 |\n| 3000 | Villeurbanne | Rhône-Alpes | 124215 |\n| 3001 | Metz | Lorraine | 123776 |\n| 3002 | Besançon | Franche-Comté | 117733 |\n| 3003 | Caen | Basse-Normandie | 113987 |\n| 3004 | Orléans | Centre | 113126 |\n| 3005 | Mulhouse | Alsace | 110359 |\n| 3006 | Rouen | Haute-Normandie | 106592 |\n| 3007 | Boulogne-Billancourt | Île-de-France | 106367 |\n| 3008 | Perpignan | Languedoc-Roussillon | 105115 |\n| 3009 | Nancy | Lorraine | 103605 |\n| 3010 | Roubaix | Nord-Pas-de-Calais | 96984 |\n| 3011 | Argenteuil | Île-de-France | 93961 |\n| 3012 | Tourcoing | Nord-Pas-de-Calais | 93540 |\n| 3013 | Montreuil | Île-de-France | 90674 |\n\n\n\n::: {.callout-note}\n\n{{< fa hand-point-right >}} La description des tables `country` et `city` n'impose pas que la capitale d'un pays soit une ville située dans ce pays. \n\nEst-ce que cette contrainte devrait être mise en place ?\n\n:::\n\n\n## Table world.countrylanguage \n\nLa table `countrylanguage` nous renseigne sur les langues parlées dans les différents pays.\n\n\n::: {.smaller}\n\n|Idx |Name |Data Type |\n|---|---|---|\n| * &#128273;  &#11016; | countrycode| char(3)  |\n| * &#128273;  | language| text  |\n| * | isofficial| boolean  |\n| * | percentage| real  |\n\n:::\n\n\nUn extrait correspondant au pays `FRA` (France) aide à comprendre\n\n::: {.smaller}\n\n| countrycode |  language  | isofficial | percentage |\n|:------------|:-----------|:----------:|-----------:|\n| FRA         | French     | t          |       93.6 |\n| FRA         | Arabic     | f          |        2.5 |\n| FRA         | Portuguese | f          |        1.2 |\n| FRA         | Italian    | f          |        0.4 |\n| FRA         | Spanish    | f          |        0.4 |\n| FRA         | Turkish    | f          |        0.4 |\n\n:::\n\n\nLes lignes nous renseignent sur 6 langues. Une documentation complète \nserait nécessaire pour vérifier si le `percentage` correspond à la proportion\nd'individus qui déclarent  telle ou telle langue comme langue maternelle. \nOn ne sait pas si un individu peut déclarer posséder plusieurs langues. \n\n::: {.callout-note}\n\n{{< fa hand-point-right >}} La documentation d'une base de données ne se réduit pas toujours à un diagramme.\n\n:::\n   \nD'après l'instance du schéma `world`, la seule langue réputée officielle \nen France est le français. \n\n::: {.callout-note}\n\n{{< fa brain >}} Qu'est ce qu'une langue officielle ?\n\n:::\n\n\nDans la table `countrylanguage`, l'attribut `countrycode`  renvoie à une ligne de `country` grâce à l'attribut de même nom dans la table `country.` \n\n\n### Foreign Keys\n\n\n|Type |Name |On |\n|---|---|---|\n|  | countrylanguage_countrycode_fkey | ( countrycode ) ref [world.country](#country) (countrycode) |\n\n\n::: {.callout-note}\n\nDans le schéma `world`, chaque ligne de `countrylanguage`  est identifiée par les valeurs des colonnes `countrycode` et `language`. On parle de *clé primaire* composée.\n\n:::\n\n\n",
    "supporting": [
      "schema-world_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}